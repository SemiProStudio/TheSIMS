import{j as e,a as r,i as m,t as c,c as n,w as b,s as l,S as f,U as z,D as S,B as C,J as a}from"./index-TtmnPN12.js";import{a as y,t as M}from"./vendor-icons-B6HpBdFH.js";import{M as I,a as N}from"./ModalBase-BgtxHV_N.js";import"./vendor-react-DwPMHwnM.js";const R=y.memo(function({item:p,editingRecord:d,onSave:D,onClose:h}){const x=!!d,v=t=>{if(!t)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;try{const u=new Date(t);return isNaN(u.getTime())?"":u.toISOString().split("T")[0]}catch{return""}},[s,w]=y.useState(()=>d?{...d,scheduledDate:v(d.scheduledDate),completedDate:v(d.completedDate)}:{type:"Repair",description:"",vendor:"",vendorContact:"",cost:"",scheduledDate:new Date().toISOString().split("T")[0],completedDate:"",status:"scheduled",notes:"",warrantyWork:!1}),[i,j]=y.useState({}),o=(t,u)=>{w(g=>({...g,[t]:u})),i[t]&&j(g=>({...g,[t]:null}))},k=()=>{const t={};return s.type||(t.type="Type is required"),s.description.trim()||(t.description="Description is required"),s.cost&&isNaN(Number(s.cost))&&(t.cost="Cost must be a number"),j(t),Object.keys(t).length===0},T=()=>{if(!k())return;const t={...s,id:d?.id||`maint-${Date.now()}`,cost:s.cost?Number(s.cost):0,createdAt:d?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};s.status==="completed"&&!s.completedDate&&(t.completedDate=new Date().toISOString().split("T")[0]),D(t)};return e.jsxs(I,{onClose:h,maxWidth:550,children:[e.jsx(N,{title:x?"Edit Maintenance Record":"Add Maintenance Record",onClose:h}),e.jsxs("div",{style:{padding:r[4]},children:[e.jsxs("div",{style:{background:`${b(n.primary,10)}`,borderRadius:m.lg,padding:r[3],marginBottom:r[4],display:"flex",alignItems:"center",gap:r[3]},children:[p?.image?e.jsx("img",{src:p.image,alt:"",style:{width:48,height:48,objectFit:"cover",borderRadius:m.md}}):e.jsx("div",{style:{width:48,height:48,background:`${b(n.primary,20)}`,borderRadius:m.md,display:"flex",alignItems:"center",justifyContent:"center",color:n.textMuted,fontSize:c.fontSize.xs},children:"No img"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:c.fontWeight.medium,color:n.textPrimary},children:p?.name}),e.jsxs("div",{style:{fontSize:c.fontSize.sm,color:n.textMuted},children:[p?.brand," â€¢ ",p?.id]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:r[3],marginBottom:r[4]},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{...l.label,color:!s.type||i.type?n.danger:void 0},children:["Maintenance Type ",e.jsx("span",{style:{color:n.danger},children:"*"})]}),e.jsx(f,{value:s.type,onChange:t=>o("type",t.target.value),options:z.map(t=>({value:t,label:t})),"aria-label":"Maintenance type"}),i.type&&e.jsx("span",{style:{color:n.danger,fontSize:c.fontSize.xs},children:i.type})]}),e.jsxs("div",{children:[e.jsx("label",{style:l.label,children:"Status"}),e.jsx(f,{value:s.status,onChange:t=>o("status",t.target.value),options:[{value:"scheduled",label:"Scheduled"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],"aria-label":"Status"})]})]}),e.jsxs("div",{style:{marginBottom:r[4]},children:[e.jsxs("label",{style:{...l.label,color:!s.description||i.description?n.danger:void 0},children:["Description ",e.jsx("span",{style:{color:n.danger},children:"*"})]}),e.jsx("textarea",{value:s.description,onChange:t=>o("description",t.target.value),placeholder:"Describe the maintenance work...",rows:2,style:{...l.input,resize:"vertical",borderColor:!s.description||i.description?n.danger:n.border}}),i.description&&e.jsx("span",{style:{color:n.danger,fontSize:c.fontSize.xs},children:i.description})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:r[3],marginBottom:r[4]},children:[e.jsxs("div",{children:[e.jsx("label",{style:l.label,children:"Vendor / Service Provider"}),e.jsx("input",{type:"text",value:s.vendor,onChange:t=>o("vendor",t.target.value),placeholder:"e.g., Canon Service Center",style:l.input})]}),e.jsxs("div",{children:[e.jsx("label",{style:l.label,children:"Vendor Contact"}),e.jsx("input",{type:"text",value:s.vendorContact,onChange:t=>o("vendorContact",t.target.value),placeholder:"Phone or email",style:l.input})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:r[3],marginBottom:r[4]},children:[e.jsxs("div",{children:[e.jsx("label",{style:l.label,children:"Cost ($)"}),e.jsx("input",{type:"text",value:s.cost,onChange:t=>o("cost",t.target.value),placeholder:"0.00",style:{...l.input,borderColor:i.cost?n.danger:n.border}}),i.cost&&e.jsx("span",{style:{color:n.danger,fontSize:c.fontSize.xs},children:i.cost})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",paddingBottom:r[2]},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:r[2],cursor:"pointer",fontSize:c.fontSize.sm,color:n.textSecondary},children:[e.jsx("input",{type:"checkbox",checked:s.warrantyWork,onChange:t=>o("warrantyWork",t.target.checked),style:{width:18,height:18}}),"Warranty Work"]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:r[3],marginBottom:r[4]},children:[e.jsxs("div",{children:[e.jsx("label",{style:l.label,children:"Scheduled Date"}),e.jsx(S,{value:s.scheduledDate,onChange:t=>o("scheduledDate",t.target.value),placeholder:"Select scheduled date","aria-label":"Scheduled date"})]}),e.jsxs("div",{children:[e.jsx("label",{style:l.label,children:"Completed Date"}),e.jsx(S,{value:s.completedDate,onChange:t=>o("completedDate",t.target.value),disabled:s.status==="scheduled",placeholder:"Select completed date","aria-label":"Completed date"})]})]}),e.jsxs("div",{style:{marginBottom:r[4]},children:[e.jsx("label",{style:l.label,children:"Notes"}),e.jsx("textarea",{value:s.notes,onChange:t=>o("notes",t.target.value),placeholder:"Additional notes about this maintenance...",rows:2,style:{...l.input,resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:r[3],justifyContent:"flex-end"},children:[e.jsx(C,{variant:"secondary",onClick:h,children:"Cancel"}),e.jsx(C,{onClick:T,icon:M,children:x?"Update Record":"Add Record"})]})]})]})}),B=a.shape({id:a.string,type:a.string,description:a.string,scheduledDate:a.string,completedDate:a.string,status:a.oneOf(["scheduled","in-progress","completed","cancelled"]),cost:a.oneOfType([a.string,a.number]),vendor:a.string,warrantyWork:a.bool,notes:a.string});R.propTypes={item:a.shape({id:a.string.isRequired,name:a.string.isRequired,brand:a.string,condition:a.string}).isRequired,editingRecord:B,onSave:a.func.isRequired,onClose:a.func.isRequired};export{R as MaintenanceModal};
//# sourceMappingURL=MaintenanceModal-MB5JX6M8.js.map
