const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-TtmnPN12.js","assets/vendor-icons-B6HpBdFH.js","assets/vendor-react-DwPMHwnM.js","assets/index-BNfydcti.css"])))=>i.map(i=>d[i]);
import{j as e,a as r,s as y,c as l,i as P,B as S,t as p,w as N,_}from"./index-TtmnPN12.js";import{a as c,U as T,a0 as U,t as $,X as L}from"./vendor-icons-B6HpBdFH.js";import{I as A}from"./ImageCropEditor-DFvxRXQs.js";import"./vendor-react-DwPMHwnM.js";const O=c.memo(function({onClose:m,maxWidth:d=500,children:i}){return e.jsx("div",{style:y.modal,onClick:m,children:e.jsx("div",{onClick:f=>f.stopPropagation(),style:{...y.modalBox,maxWidth:d},children:i})})}),D=c.memo(function({title:m,icon:d,onClose:i}){return e.jsxs("div",{style:{padding:r[4],borderBottom:`1px solid ${l.borderLight}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("h3",{style:{margin:0,fontSize:p.fontSize.lg,color:l.textPrimary,display:"flex",alignItems:"center",gap:r[2]},children:[d&&e.jsx(d,{size:20}),m]}),e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:l.textMuted,cursor:"pointer",padding:r[1]},children:e.jsx(L,{size:20})})]})});function H({user:s,onSave:m,onClose:d}){const[i,f]=c.useState({displayName:s?.profile?.displayName||s?.name||"",businessName:s?.profile?.businessName||"",phone:s?.profile?.phone||"",email:s?.email||"",address:s?.profile?.address||"",logo:s?.profile?.logo||null,showFields:s?.profile?.showFields||{displayName:!0,businessName:!0,phone:!0,email:!0,address:!1,logo:!0}}),[g,u]=c.useState({}),[v,j]=c.useState(null),b=c.useRef(null),C={email:o=>o?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?null:"Enter a valid email address":null,phone:o=>{if(!o)return null;const t=o.replace(/\D/g,"");return t.length>=7&&t.length<=15?null:"Enter a valid phone number (7â€“15 digits)"}},w=(o,t)=>{const a=C[o];if(!a)return null;const n=a(t);return u(x=>({...x,[o]:n})),n},F=()=>{const o={};for(const[t,a]of Object.entries(C)){const n=a(i[t]);n&&(o[t]=n)}return u(o),Object.keys(o).length===0},h=(o,t)=>{f(a=>({...a,[o]:t})),g[o]&&w(o,t)},B=o=>{f(t=>({...t,showFields:{...t.showFields,[o]:!t.showFields[o]}}))},R=o=>{const t=o.target.files?.[0];if(t){if(t.size>5*1024*1024){u(n=>({...n,logo:"Image must be smaller than 5MB"}));return}if(!t.type.startsWith("image/")){u(n=>({...n,logo:"Please select an image file"}));return}u(n=>({...n,logo:null}));const a=new FileReader;a.onload=n=>j(n.target.result),a.readAsDataURL(t)}o.target&&(o.target.value="")},[k,z]=c.useState(!1),E=async o=>{if(j(null),s?.id){z(!0);try{const{storageService:t}=await _(async()=>{const{storageService:n}=await import("./index-TtmnPN12.js").then(x=>x.a8);return{storageService:n}},__vite__mapDeps([0,1,2,3])),a=await t.uploadFromDataUrl(o,`profiles/${s.id}`);h("logo",a.url)}catch{h("logo",o)}finally{z(!1)}}else h("logo",o)},I=()=>{j(null)},M=()=>{F()&&(m({...s,profile:i}),d())};return e.jsxs(O,{onClose:d,maxWidth:550,children:[e.jsx(D,{title:"Profile Settings",icon:T,onClose:d}),e.jsxs("div",{style:{padding:r[4],maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{style:{marginBottom:r[5]},children:[e.jsx("label",{style:y.label,children:"Profile Photo"}),v?e.jsx(A,{imageSrc:v,onCropComplete:E,onCancel:I,outputSize:400,cropShape:"rounded-square",cropBorderRadius:12,title:"Crop your photo"}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r[4]},children:[e.jsx("div",{onClick:()=>b.current?.click(),style:{width:80,height:80,borderRadius:P.lg,border:`2px dashed ${l.border}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",overflow:"hidden"},children:i.logo?e.jsx("img",{src:i.logo,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(U,{size:24,color:l.textMuted})}),e.jsxs("div",{children:[e.jsx(S,{variant:"secondary",size:"sm",onClick:()=>b.current?.click(),disabled:k,children:k?"Uploading...":"Upload Photo"}),i.logo&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{j(i.logo)},style:{display:"block",background:"none",border:"none",color:l.primary,cursor:"pointer",fontSize:p.fontSize.sm,marginTop:r[2]},children:"Resize / Crop"}),e.jsx("button",{onClick:()=>h("logo",null),style:{display:"block",background:"none",border:"none",color:l.danger,cursor:"pointer",fontSize:p.fontSize.sm,marginTop:r[1]},children:"Remove"})]})]}),e.jsx("input",{ref:b,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:R,style:{display:"none"}})]}),g.logo&&e.jsx("div",{style:{color:l.danger,fontSize:p.fontSize.xs,marginTop:r[1]},children:g.logo})]}),e.jsx("div",{style:{display:"grid",gap:r[4]},children:[["displayName","Display Name","text","Your name or alias"],["businessName","Business Name","text","Company or studio name"],["phone","Phone","tel","555-123-4567"],["email","Email","email","you@example.com"],["address","Address","text","Street, City, State"]].map(([o,t,a,n])=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:r[2]},children:[e.jsx("label",{style:{...y.label,marginBottom:0},children:t}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:r[2],cursor:"pointer",fontSize:p.fontSize.xs,color:l.textMuted},children:[e.jsx("input",{type:"checkbox",checked:i.showFields[o],onChange:()=>B(o),style:{accentColor:l.primary}}),"Show on labels"]})]}),e.jsx("input",{type:a,value:i[o],onChange:x=>h(o,x.target.value),onBlur:()=>w(o,i[o]),placeholder:n,style:{...y.input,...g[o]?{borderColor:l.danger}:{}}}),g[o]&&e.jsx("div",{style:{color:l.danger,fontSize:p.fontSize.xs,marginTop:r[1]},children:g[o]})]},o))}),e.jsxs("div",{style:{marginTop:r[5],padding:r[3],background:`${N(l.primary,10)}`,borderRadius:P.md,fontSize:p.fontSize.sm,color:l.textSecondary},children:[e.jsx("strong",{style:{color:l.textPrimary},children:"Branding Settings"}),e.jsx("p",{style:{margin:`${r[2]}px 0 0`},children:'Fields marked "Show on labels" will be included when generating labels or reports with branding enabled.'})]})]}),e.jsxs("div",{style:{padding:r[4],borderTop:`1px solid ${l.borderLight}`,display:"flex",gap:r[3],justifyContent:"flex-end"},children:[e.jsx(S,{variant:"secondary",onClick:d,children:"Cancel"}),e.jsx(S,{onClick:M,icon:$,children:"Save Profile"})]})]})}const X=c.memo(H);export{X as default};
//# sourceMappingURL=ProfileModal-BMznNtty.js.map
