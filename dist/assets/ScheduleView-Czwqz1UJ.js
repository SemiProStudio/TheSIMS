import{o as m,j as e,a as s,p as x,B as D,i as S,c as n,s as A,w as g,t as l,D as _,C as N,d as w,m as B}from"./index-TtmnPN12.js";import{a as y,A as O,b as F,o as K,k as q,p as X,c as G,q as J,n as Q}from"./vendor-icons-B6HpBdFH.js";import"./vendor-react-DwPMHwnM.js";function Z({inventory:L,scheduleView:c,setScheduleView:C,scheduleDate:j,setScheduleDate:$,scheduleMode:f,setScheduleMode:R,onViewItem:V,onViewReservation:E,onAddReservation:I}){const W=y.useMemo(()=>(L||[]).flatMap(t=>(t.reservations||[]).map(i=>({...i,item:t}))).sort((t,i)=>new Date(t.start)-new Date(i.start)),[L]),k=y.useMemo(()=>{const t={};return W.forEach(i=>{const r=`${i.project||"unnamed"}_${i.start}_${i.end}`;t[r]?(t[r].items.push(i.item),t[r].itemCount++):t[r]={...i,items:[i.item],itemCount:1}}),Object.values(t).sort((i,r)=>new Date(i.start)-new Date(r.start))},[W]),v=y.useMemo(()=>{const t=new Date(j);if(c===m.DAY)return[t];if(c===m.WEEK)return[...Array(7)].map((p,b)=>{const u=new Date(t);return u.setDate(t.getDate()+b),u});const i=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(i);r.setDate(r.getDate()-r.getDay());const d=[];for(let p=0;p<42;p++){const b=new Date(r);b.setDate(r.getDate()+p),d.push(b)}return d},[j,c]),h=y.useCallback(t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,[]),z=y.useMemo(()=>{const t=h(v[0]),i=h(v[v.length-1]);return k.filter(r=>r.start<=i&&r.end>=t)},[k,v,h]),T=y.useCallback(t=>{const i=new Date(j);c===m.DAY?i.setDate(i.getDate()+t):c===m.WEEK?i.setDate(i.getDate()+t*7):i.setMonth(i.getMonth()+t),$(h(i))},[j,c,$,h]),P=h(new Date),o=c===m.MONTH,M=c===m.DAY,Y=y.useCallback(()=>{C(m.MONTH)},[C]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s[3]},children:[M&&f===x.CALENDAR&&e.jsx(D,{variant:"secondary",onClick:Y,icon:O,children:"Month"}),e.jsx("h2",{className:"page-title",children:"Schedule"})]}),e.jsxs("div",{style:{display:"flex",gap:s[3],alignItems:"center",flexWrap:"wrap"},children:[I&&e.jsx(D,{onClick:I,icon:F,style:{marginRight:s[2]},children:"New"}),e.jsxs("div",{style:{display:"flex",background:`${g(n.primary,15)}`,borderRadius:S.lg},children:[e.jsx("button",{onClick:()=>R(x.LIST),title:"List View",style:{...A.btnSec,border:"none",background:f===x.LIST?`${g(n.primary,30)}`:"transparent",color:f===x.LIST?n.primary:n.textSecondary,padding:"12px 14px"},children:e.jsx(K,{size:16})}),e.jsx("button",{onClick:()=>R(x.CALENDAR),title:"Calendar View",style:{...A.btnSec,border:"none",background:f===x.CALENDAR?`${g(n.primary,30)}`:"transparent",color:f===x.CALENDAR?n.primary:n.textSecondary,padding:"12px 14px"},children:e.jsx(q,{size:16})})]}),e.jsx("div",{style:{display:"flex",background:`${g(n.primary,15)}`,borderRadius:S.lg},children:Object.values(m).map(t=>e.jsx("button",{onClick:()=>C(t),style:{...A.btnSec,border:"none",background:c===t?`${g(n.primary,30)}`:"transparent",color:c===t?n.primary:n.textSecondary,fontWeight:c===t?l.fontWeight.medium:l.fontWeight.normal,textTransform:"capitalize",fontSize:l.fontSize.sm,padding:"12px 14px"},children:t},t))}),e.jsxs("div",{style:{display:"flex",gap:s[1],alignItems:"center"},children:[e.jsx(D,{variant:"secondary",onClick:()=>T(-1),icon:O,style:{padding:"12px 14px"}}),e.jsx(_,{value:j,onChange:t=>$(t.target.value),style:{width:"160px"},showTodayButton:!1,clearable:!1,"aria-label":"Schedule date"}),e.jsx(D,{variant:"secondary",onClick:()=>T(1),icon:X,style:{padding:"12px 14px"}})]})]})]}),f===x.LIST&&e.jsxs(N,{padding:!1,children:[e.jsxs("div",{style:{padding:s[4],borderBottom:`1px solid ${n.borderLight}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{style:{color:n.textPrimary},children:"Reservations"}),e.jsxs("span",{style:{fontSize:l.fontSize.sm,color:n.textMuted},children:[z.length," in this period"]})]}),e.jsx("div",{style:{maxHeight:"calc(100vh - 280px)",overflowY:"auto"},children:z.length===0?e.jsx("div",{style:{padding:s[10],textAlign:"center",color:n.textMuted},children:"No reservations in this period"}):z.map((t,i)=>e.jsxs("div",{onClick:()=>E(t,t.items[0]),style:{display:"flex",alignItems:"center",gap:s[4],padding:`${s[4]}px ${s[4]}px`,borderBottom:`1px solid ${n.borderLight}`,cursor:"pointer"},children:[e.jsx("div",{style:{position:"relative",width:50,height:50,flexShrink:0},children:t.items.slice(0,Math.min(3,t.itemCount)).map((r,d)=>e.jsx("div",{style:{position:d===0?"relative":"absolute",top:d*4,left:d*4,zIndex:3-d},children:r.image?e.jsx("img",{src:r.image,alt:"",style:{width:46-d*4,height:46-d*4,borderRadius:S.md,objectFit:"cover",border:`2px solid ${n.bgMedium}`}}):e.jsx("div",{style:{width:46-d*4,height:46-d*4,borderRadius:S.md,background:g(n.primary,15),display:"flex",alignItems:"center",justifyContent:"center",color:n.textMuted,border:`2px solid ${n.bgMedium}`},children:e.jsx(G,{size:14})})},r.id))}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",gap:s[2],marginBottom:s[1],flexWrap:"wrap"},children:[t.itemCount>1?e.jsx(w,{text:`${t.itemCount} items`,color:n.primary}):e.jsx(w,{text:t.items[0]?.id||"N/A",color:n.primary}),e.jsx(w,{text:t.projectType||"Project",color:n.accent2})]}),e.jsx("div",{style:{fontWeight:l.fontWeight.medium,color:n.textPrimary,marginBottom:s[1]},children:t.project}),e.jsx("div",{style:{fontSize:l.fontSize.sm,color:n.textMuted},children:t.itemCount>1?`${t.items[0]?.name||"Unknown"}${t.itemCount>1?` + ${t.itemCount-1} more`:""}`:`${t.items[0]?.name||"Unknown"} â€¢ ${t.user}`})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s[1],fontSize:l.fontSize.sm,color:n.primary,marginBottom:s[1]},children:[e.jsx(J,{size:12}),B(t.start)," - ",B(t.end)]}),t.location&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s[1],fontSize:l.fontSize.xs,color:n.textMuted},children:[e.jsx(Q,{size:10}),t.location.substring(0,25),t.location.length>25?"...":""]})]})]},`${t.project}-${t.start}-${i}`))})]}),f===x.CALENDAR&&(()=>{const t=new Date(j).getMonth();return e.jsx("div",{style:{display:"grid",gridTemplateColumns:o?"repeat(7, minmax(0, 1fr))":"1fr",gridAutoRows:o?"110px":"auto",gap:o?s[1]:s[3]},children:v.map((i,r)=>{const d=h(i),p=d===P,b=o&&i.getMonth()!==t,u=k.filter(a=>a.start<=d&&a.end>=d),H=()=>{o&&($(d),C(m.DAY))};return e.jsx("div",{style:{height:"100%"},children:e.jsxs(N,{padding:!1,style:{height:"100%",minHeight:M?300:"auto",borderColor:p?n.primary:void 0,overflow:"hidden",display:"flex",opacity:b?.4:1,flexDirection:"column"},children:[e.jsxs("div",{onClick:H,style:{padding:o?`${s[1]}px ${s[2]}px`:`${s[2]}px ${s[3]}px`,borderBottom:`1px solid ${n.borderLight}`,display:"flex",justifyContent:"space-between",alignItems:"center",background:p?`${g(n.primary,15)}`:void 0,cursor:o?"pointer":"default",transition:"background 150ms ease"},onMouseEnter:o?a=>{p||(a.currentTarget.style.background=`${g(n.primary,10)}`)}:void 0,onMouseLeave:o?a=>{p||(a.currentTarget.style.background="transparent")}:void 0,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s[2]},children:[e.jsx("span",{style:{fontSize:o?l.fontSize.xs:l.fontSize.base,fontWeight:l.fontWeight.semibold,color:p?n.primary:n.textPrimary},children:i.toLocaleDateString("en-US",{weekday:o?"short":"long"})}),e.jsx("span",{style:{fontSize:o?l.fontSize.sm:l.fontSize.base,color:p?n.primary:n.textMuted},children:i.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),!o&&u.length>0&&e.jsx(w,{text:`${u.length} reservation${u.length>1?"s":""}`,color:n.primary,size:"sm"})]}),e.jsx("div",{style:{padding:o?s[1]:s[2],overflowY:"auto",overflowX:"hidden",maxHeight:M?260:o?60:"none",flex:o?1:"none",display:o?"block":"flex",flexWrap:"wrap",gap:o?0:s[2]},children:u.map((a,U)=>e.jsxs("div",{onClick:()=>E(a,a.items[0]),title:`${a.itemCount>1?`${a.itemCount} items`:a.items[0]?.name}${a.project?` - ${a.project}`:""}`,style:{background:`${g(n.primary,20)}`,borderLeft:`3px solid ${n.primary}`,borderRadius:S.sm,padding:o?s[1]:s[2],marginBottom:s[1],cursor:"pointer",overflow:"hidden"},children:[e.jsx("div",{style:{fontSize:o?l.fontSize.xs:l.fontSize.sm,fontWeight:l.fontWeight.medium,color:n.textPrimary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.itemCount>1?`${a.itemCount} items`:a.items[0]?.name}),!o&&e.jsx("div",{style:{fontSize:l.fontSize.xs,color:n.primary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.project})]},U))})]})},r)})})})()]})}const it=y.memo(Z);export{it as default};
//# sourceMappingURL=ScheduleView-Czwqz1UJ.js.map
