{"version":3,"file":"ChangeLog-CQKx-PXE.js","sources":["../../views/ChangeLog.jsx"],"sourcesContent":["// ============================================================================\n// Change Log Component\n// Tracks and displays all changes made to items, kits, and packages\n// ============================================================================\n\nimport React, { memo, useState, useMemo, useCallback } from 'react';\nimport { History, Search, Package, ChevronRight, Clock, User, Edit2, Plus, Trash2, RefreshCw, ArrowRight, X } from 'lucide-react';\nimport { colors, styles, spacing, borderRadius, typography, withOpacity} from '../theme.js';\nimport { formatDate, formatDateTime } from '../utils.js';\nimport { Card, Button, SearchInput, Badge, BackButton, PageHeader } from '../components/ui.jsx';\n\n// Change type icons and colors\nconst CHANGE_TYPE_CONFIG = {\n  created: { icon: Plus, color: colors.success, label: 'Created' },\n  updated: { icon: Edit2, color: colors.primary, label: 'Updated' },\n  deleted: { icon: Trash2, color: colors.danger, label: 'Deleted' },\n  status_change: { icon: RefreshCw, color: colors.warning, label: 'Status Changed' },\n  checkout: { icon: ArrowRight, color: colors.checkedOut, label: 'Checked Out' },\n  checkin: { icon: RefreshCw, color: colors.available, label: 'Checked In' },\n  bulk_update: { icon: Edit2, color: colors.accent1, label: 'Bulk Update' },\n  bulk_delete: { icon: Trash2, color: colors.danger, label: 'Bulk Delete' },\n  reservation_added: { icon: Plus, color: colors.reserved, label: 'Reservation Added' },\n  reservation_removed: { icon: Trash2, color: colors.textMuted, label: 'Reservation Removed' },\n  maintenance: { icon: Edit2, color: colors.warning, label: 'Maintenance Updated' },\n  value_updated: { icon: Edit2, color: colors.accent2, label: 'Value Updated' },\n};\n\n// Format field value for display\nconst formatFieldValue = (value) => {\n  if (value === null || value === undefined) return '-';\n  if (typeof value === 'boolean') return value ? 'Yes' : 'No';\n  if (typeof value === 'object') return JSON.stringify(value);\n  return String(value);\n};\n\n// Change entry component\nconst ChangeEntry = memo(function ChangeEntry({ change, onViewItem, isExpanded }) {\n  const config = CHANGE_TYPE_CONFIG[change.type] || CHANGE_TYPE_CONFIG.updated;\n  const Icon = config.icon;\n  \n  return (\n    <div style={{\n      padding: spacing[3],\n      borderBottom: `1px solid ${colors.border}`,\n      background: isExpanded ? `${withOpacity(colors.primary, 5)}` : 'transparent',\n    }}>\n      <div style={{\n        display: 'flex',\n        alignItems: 'flex-start',\n        gap: spacing[3],\n      }}>\n        {/* Icon */}\n        <div style={{\n          width: 36,\n          height: 36,\n          borderRadius: borderRadius.md,\n          background: withOpacity(config.color, 15),\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          flexShrink: 0,\n        }}>\n          <Icon size={18} style={{ color: config.color }} />\n        </div>\n        \n        {/* Content */}\n        <div style={{ flex: 1, minWidth: 0 }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: spacing[2], flexWrap: 'wrap' }}>\n            <Badge text={config.label} color={config.color} size=\"sm\" />\n            {change.itemId && (\n              <button\n                onClick={() => onViewItem(change.itemId, change.itemType)}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  padding: 0,\n                  cursor: 'pointer',\n                  color: colors.primary,\n                  fontWeight: typography.fontWeight.medium,\n                  fontSize: typography.fontSize.sm,\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: spacing[1],\n                }}\n              >\n                {change.itemType === 'package' ? <Package size={14} /> : null}\n                {change.itemId}\n                {change.itemName && ` - ${change.itemName}`}\n              </button>\n            )}\n          </div>\n          \n          {/* Description */}\n          <p style={{ \n            margin: `${spacing[1]}px 0 0`, \n            color: colors.textPrimary,\n            fontSize: typography.fontSize.sm,\n          }}>\n            {change.description}\n          </p>\n          \n          {/* Field changes */}\n          {change.changes && change.changes.length > 0 && (\n            <div style={{\n              marginTop: spacing[2],\n              padding: spacing[2],\n              background: colors.bgDark,\n              borderRadius: borderRadius.md,\n              fontSize: typography.fontSize.xs,\n            }}>\n              {change.changes.map((fieldChange, idx) => (\n                <div key={idx} style={{\n                  display: 'flex',\n                  gap: spacing[2],\n                  padding: `${spacing[1]}px 0`,\n                  borderBottom: idx < change.changes.length - 1 ? `1px solid ${colors.border}` : 'none',\n                }}>\n                  <span style={{ color: colors.textMuted, minWidth: 100 }}>{fieldChange.field}:</span>\n                  <span style={{ color: colors.danger, textDecoration: 'line-through' }}>\n                    {formatFieldValue(fieldChange.oldValue)}\n                  </span>\n                  <span style={{ color: colors.textMuted }}>→</span>\n                  <span style={{ color: colors.success }}>\n                    {formatFieldValue(fieldChange.newValue)}\n                  </span>\n                </div>\n              ))}\n            </div>\n          )}\n          \n          {/* Meta info */}\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: spacing[3],\n            marginTop: spacing[2],\n            fontSize: typography.fontSize.xs,\n            color: colors.textMuted,\n          }}>\n            <span style={{ display: 'flex', alignItems: 'center', gap: spacing[1] }}>\n              <Clock size={12} />\n              {formatDateTime(change.timestamp)}\n            </span>\n            <span style={{ display: 'flex', alignItems: 'center', gap: spacing[1] }}>\n              <User size={12} />\n              {change.user || 'System'}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\n// Item history view\nconst ItemHistoryView = memo(function ItemHistoryView({ item, changes, onBack, onViewItem }) {\n  if (!item) return null;\n  \n  const itemChanges = changes.filter(c => c.itemId === item.id);\n  \n  return (\n    <div>\n      <BackButton onClick={onBack} label=\"Back to Change Log\" />\n      \n      <Card style={{ marginTop: spacing[4] }}>\n        <div style={{\n          padding: spacing[4],\n          borderBottom: `1px solid ${colors.border}`,\n          display: 'flex',\n          alignItems: 'center',\n          gap: spacing[3],\n        }}>\n          <div style={{\n            width: 48,\n            height: 48,\n            borderRadius: borderRadius.lg,\n            background: `${withOpacity(colors.primary, 15)}`,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}>\n            <History size={24} style={{ color: colors.primary }} />\n          </div>\n          <div>\n            <h3 style={{ margin: 0, color: colors.textPrimary }}>{item.name}</h3>\n            <p style={{ margin: `${spacing[1]}px 0 0`, color: colors.textMuted, fontSize: typography.fontSize.sm }}>\n              {item.id} • {itemChanges.length} change{itemChanges.length !== 1 ? 's' : ''} recorded\n            </p>\n          </div>\n        </div>\n        \n        {itemChanges.length > 0 ? (\n          <div>\n            {itemChanges.map((change, idx) => (\n              <ChangeEntry \n                key={change.id || idx} \n                change={change} \n                onViewItem={onViewItem}\n              />\n            ))}\n          </div>\n        ) : (\n          <div style={{\n            padding: spacing[6],\n            textAlign: 'center',\n            color: colors.textMuted,\n          }}>\n            No changes recorded for this item.\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n});\n\n// Search result item\nconst SearchResultItem = memo(function SearchResultItem({ item, onClick, changeCount }) {\n  const isPackage = item.type === 'package';\n  \n  return (\n    <button\n      onClick={onClick}\n      className=\"list-item-hover\"\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: spacing[3],\n        width: '100%',\n        padding: spacing[3],\n        background: 'transparent',\n        border: 'none',\n        borderBottom: `1px solid ${colors.border}`,\n        cursor: 'pointer',\n        textAlign: 'left',\n      }}\n    >\n      <div style={{\n        width: 40,\n        height: 40,\n        borderRadius: borderRadius.md,\n        background: isPackage ? `${withOpacity(colors.accent1, 15)}` : `${withOpacity(colors.primary, 15)}`,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}>\n        {isPackage ? <Package size={18} style={{ color: colors.accent1 }} /> : <History size={18} style={{ color: colors.primary }} />}\n      </div>\n      <div style={{ flex: 1 }}>\n        <div style={{ fontWeight: typography.fontWeight.medium, color: colors.textPrimary }}>\n          {item.name}\n        </div>\n        <div style={{ fontSize: typography.fontSize.sm, color: colors.textMuted }}>\n          {item.id} • {item.category || item.type}\n        </div>\n      </div>\n      <div style={{ display: 'flex', alignItems: 'center', gap: spacing[2] }}>\n        <span style={{ fontSize: typography.fontSize.sm, color: colors.textMuted }}>\n          {changeCount} change{changeCount !== 1 ? 's' : ''}\n        </span>\n        <ChevronRight size={16} style={{ color: colors.textMuted }} />\n      </div>\n    </button>\n  );\n});\n\n// Main Change Log Component\nfunction ChangeLog({ \n  changeLog = [], \n  inventory = [], \n  packages = [], \n  onViewItem,\n  onBack,\n}) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedItem, setSelectedItem] = useState(null);\n  \n  // Get recent changes (last 10)\n  const recentChanges = useMemo(() => {\n    return [...changeLog]\n      .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))\n      .slice(0, 10);\n  }, [changeLog]);\n  \n  // Combine inventory and packages for search\n  const allItems = useMemo(() => {\n    const items = inventory.map(i => ({ ...i, type: 'item' }));\n    const pkgs = packages.map(p => ({ ...p, type: 'package' }));\n    return [...items, ...pkgs];\n  }, [inventory, packages]);\n  \n  // Get change counts per item\n  const changeCounts = useMemo(() => {\n    const counts = {};\n    changeLog.forEach(change => {\n      if (change.itemId) {\n        counts[change.itemId] = (counts[change.itemId] || 0) + 1;\n      }\n    });\n    return counts;\n  }, [changeLog]);\n  \n  // Search results\n  const searchResults = useMemo(() => {\n    if (!searchQuery.trim()) return [];\n    const query = searchQuery.toLowerCase();\n    return allItems\n      .filter(item => \n        item.id?.toLowerCase().includes(query) ||\n        item.name?.toLowerCase().includes(query) ||\n        item.brand?.toLowerCase().includes(query)\n      )\n      .slice(0, 10);\n  }, [searchQuery, allItems]);\n  \n  // Handle view item from change entry\n  const handleViewItem = useCallback((itemId, itemType) => {\n    const item = allItems.find(i => i.id === itemId);\n    if (item) {\n      setSelectedItem(item);\n    }\n  }, [allItems]);\n  \n  // Handle search result click\n  const handleSearchResultClick = useCallback((item) => {\n    setSelectedItem(item);\n    setSearchQuery('');\n  }, []);\n  \n  // If viewing item history\n  if (selectedItem) {\n    return (\n      <ItemHistoryView\n        item={selectedItem}\n        changes={changeLog}\n        onBack={() => setSelectedItem(null)}\n        onViewItem={handleViewItem}\n      />\n    );\n  }\n\n  return (\n    <>\n      <PageHeader\n        title=\"Change Log\"\n        subtitle=\"Track all changes made to items, kits, and packages\"\n        onBack={onBack}\n        backLabel=\"Back to Admin\"\n      />\n      \n      {/* Search Section */}\n      <Card style={{ marginBottom: spacing[4] }}>\n        <div style={{ padding: spacing[4] }}>\n          <label style={{\n            display: 'block',\n            marginBottom: spacing[2],\n            fontWeight: typography.fontWeight.medium,\n            color: colors.textPrimary,\n            fontSize: typography.fontSize.sm,\n          }}>\n            Search Items, Kits & Packages\n          </label>\n          <div style={{ position: 'relative' }}>\n            <SearchInput\n              value={searchQuery}\n              onChange={setSearchQuery}\n              onClear={() => setSearchQuery('')}\n              placeholder=\"Search by ID, name, or brand...\"\n            />\n          </div>\n        </div>\n        \n        {/* Search Results */}\n        {searchResults.length > 0 && (\n          <div style={{ borderTop: `1px solid ${colors.border}` }}>\n            {searchResults.map(item => (\n              <SearchResultItem\n                key={item.id}\n                item={item}\n                onClick={() => handleSearchResultClick(item)}\n                changeCount={changeCounts[item.id] || 0}\n              />\n            ))}\n          </div>\n        )}\n        \n        {searchQuery && searchResults.length === 0 && (\n          <div style={{\n            padding: spacing[4],\n            textAlign: 'center',\n            color: colors.textMuted,\n            borderTop: `1px solid ${colors.border}`,\n          }}>\n            No items, kits or packages found matching \"{searchQuery}\"\n          </div>\n        )}\n      </Card>\n      \n      {/* Recent Changes */}\n      <Card>\n        <div style={{\n          padding: spacing[4],\n          borderBottom: `1px solid ${colors.border}`,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: spacing[2] }}>\n            <Clock size={18} style={{ color: colors.primary }} />\n            <h3 style={{ margin: 0, color: colors.textPrimary, fontSize: typography.fontSize.lg }}>\n              Recent Changes\n            </h3>\n          </div>\n          <span style={{ color: colors.textMuted, fontSize: typography.fontSize.sm }}>\n            Last 10 changes\n          </span>\n        </div>\n        \n        {recentChanges.length > 0 ? (\n          <div>\n            {recentChanges.map((change, idx) => (\n              <ChangeEntry\n                key={change.id || idx}\n                change={change}\n                onViewItem={handleViewItem}\n              />\n            ))}\n          </div>\n        ) : (\n          <div style={{\n            padding: spacing[6],\n            textAlign: 'center',\n            color: colors.textMuted,\n          }}>\n            <History size={48} style={{ opacity: 0.3, marginBottom: spacing[3] }} />\n            <p style={{ margin: 0 }}>No changes recorded yet.</p>\n            <p style={{ margin: `${spacing[1]}px 0 0`, fontSize: typography.fontSize.sm }}>\n              Changes to items, kits, and packages will appear here.\n            </p>\n          </div>\n        )}\n      </Card>\n    </>\n  );\n}\n\nexport default memo(ChangeLog);\n"],"names":["CHANGE_TYPE_CONFIG","Plus","colors","Edit2","Trash2","RefreshCw","ArrowRight","formatFieldValue","value","ChangeEntry","memo","change","onViewItem","isExpanded","config","Icon","jsx","spacing","withOpacity","jsxs","borderRadius","Badge","typography","Package","fieldChange","idx","Clock","formatDateTime","User","ItemHistoryView","item","changes","onBack","itemChanges","BackButton","Card","History","SearchResultItem","onClick","changeCount","isPackage","ChevronRight","ChangeLog","changeLog","inventory","packages","searchQuery","setSearchQuery","useState","selectedItem","setSelectedItem","recentChanges","useMemo","a","b","allItems","items","i","pkgs","p","changeCounts","counts","searchResults","query","handleViewItem","useCallback","itemId","itemType","handleSearchResultClick","Fragment","PageHeader","SearchInput","ChangeLog_default"],"mappings":"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"}