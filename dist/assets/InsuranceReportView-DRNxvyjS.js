import{j as e,P as D,B as M,c as a,a as l,t as s,K as y,f as u,C as S,h as v,S as W,d as N,i as z,J as i}from"./index-TtmnPN12.js";import{a as m,D as A,Z as C,_ as L,c as T}from"./vendor-icons-B6HpBdFH.js";import"./vendor-react-DwPMHwnM.js";const E=m.memo(function({inventory:h,categories:k,currentUser:V,onViewItem:P,onExport:q,onBack:w}){const[j,I]=m.useState("all"),[b,R]=m.useState("value-desc"),p=m.useMemo(()=>{let t=[...h];switch(j!=="all"&&(t=t.filter(r=>r.category===j)),b){case"value-desc":t.sort((r,c)=>(c.currentValue||0)-(r.currentValue||0));break;case"value-asc":t.sort((r,c)=>(r.currentValue||0)-(c.currentValue||0));break;case"purchase-desc":t.sort((r,c)=>(c.purchasePrice||0)-(r.purchasePrice||0));break;case"name":t.sort((r,c)=>r.name.localeCompare(c.name));break;case"category":t.sort((r,c)=>r.category.localeCompare(c.category));break}return t},[h,j,b]),g=m.useMemo(()=>{const t=h.reduce((o,f)=>o+(f.purchasePrice||0),0),r=h.reduce((o,f)=>o+(f.currentValue||0),0),c=t-r,x=h.length,d={};h.forEach(o=>{d[o.category]||(d[o.category]={count:0,purchaseValue:0,currentValue:0}),d[o.category].count++,d[o.category].purchaseValue+=o.purchasePrice||0,d[o.category].currentValue+=o.currentValue||0});const n=[...h].sort((o,f)=>(f.currentValue||0)-(o.currentValue||0)).slice(0,10);return{totalPurchase:t,totalCurrent:r,totalDepreciation:c,itemCount:x,averageValue:x>0?r/x:0,byCategory:d,highValueItems:n}},[h]),B=()=>{const t=["Item ID","Name","Brand","Category","Serial Number","Purchase Date","Purchase Price","Current Value","Condition","Location","Status"],r=p.map(n=>[n.id,n.name,n.brand,n.category,n.serialNumber||"",n.purchaseDate||"",n.purchasePrice||0,n.currentValue||0,n.condition||"",n.location||"",n.status]),c=[t.join(","),...r.map(n=>n.map(o=>`"${String(o).replace(/"/g,'""')}"`).join(","))].join(`
`),x=new Blob([c],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");d.href=URL.createObjectURL(x),d.download=`insurance-inventory-${new Date().toISOString().split("T")[0]}.csv`,d.click()};return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Insurance Report",subtitle:"Asset values for insurance documentation",onBack:w,backLabel:"Back to Reports",action:e.jsx(M,{onClick:B,icon:A,children:"Export CSV"})}),V?.profile&&(()=>{const t=V.profile,r=t.showFields||{};return Object.entries(r).some(([x,d])=>d&&t[x])?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l[4],padding:l[3],marginBottom:l[4],borderBottom:`1px solid ${a.borderLight}`},children:[r.logo&&t.logo&&e.jsx("img",{src:t.logo,alt:"",style:{height:36,objectFit:"contain"}}),e.jsxs("div",{children:[r.businessName&&t.businessName&&e.jsx("div",{style:{fontWeight:s.fontWeight.semibold,color:a.textPrimary},children:t.businessName}),e.jsxs("div",{style:{fontSize:s.fontSize.xs,color:a.textMuted,display:"flex",gap:l[3],flexWrap:"wrap"},children:[r.displayName&&t.displayName&&e.jsx("span",{children:t.displayName}),r.phone&&t.phone&&e.jsx("span",{children:t.phone}),r.email&&t.email&&e.jsx("span",{children:t.email})]})]})]}):null})(),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:l[4],marginBottom:l[6]},children:[e.jsx(y,{icon:C,label:"Total Current Value",value:u(g.totalCurrent),color:a.available}),e.jsx(y,{icon:C,label:"Total Purchase Value",value:u(g.totalPurchase),color:a.primary}),e.jsx(y,{icon:L,label:"Total Depreciation",value:u(g.totalDepreciation),color:a.danger}),e.jsx(y,{icon:T,label:"Total Items",value:g.itemCount,color:a.accent1}),e.jsx(y,{icon:C,label:"Average Item Value",value:u(g.averageValue),color:a.accent2})]}),e.jsxs("div",{className:"responsive-two-col",style:{display:"grid",gap:l[5]},children:[e.jsxs(S,{padding:!1,style:{display:"flex",flexDirection:"column",maxHeight:"calc(100vh - 280px)"},children:[e.jsx(v,{title:"Inventory Schedule",action:e.jsxs("div",{style:{display:"flex",gap:l[2]},children:[e.jsx(W,{value:j,onChange:t=>I(t.target.value),options:[{value:"all",label:"All Categories"},...k.map(t=>({value:t,label:t}))],style:{width:140},"aria-label":"Filter by category"}),e.jsx(W,{value:b,onChange:t=>R(t.target.value),options:[{value:"value-desc",label:"Value (High to Low)"},{value:"value-asc",label:"Value (Low to High)"},{value:"purchase-desc",label:"Purchase Price"},{value:"name",label:"Name"},{value:"category",label:"Category"}],style:{width:160},"aria-label":"Sort by"})]})}),e.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:200},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:a.bgDark,position:"sticky",top:0},children:[e.jsx("th",{style:{padding:l[3],textAlign:"left",fontSize:s.fontSize.xs,color:a.textMuted,fontWeight:s.fontWeight.medium},children:"Item"}),e.jsx("th",{style:{padding:l[3],textAlign:"left",fontSize:s.fontSize.xs,color:a.textMuted,fontWeight:s.fontWeight.medium},children:"Category"}),e.jsx("th",{style:{padding:l[3],textAlign:"right",fontSize:s.fontSize.xs,color:a.textMuted,fontWeight:s.fontWeight.medium},children:"Purchase"}),e.jsx("th",{style:{padding:l[3],textAlign:"right",fontSize:s.fontSize.xs,color:a.textMuted,fontWeight:s.fontWeight.medium},children:"Current"})]})}),e.jsx("tbody",{children:p.map((t,r)=>e.jsxs("tr",{onClick:()=>P(t.id),style:{borderBottom:`1px solid ${a.borderLight}`,cursor:"pointer"},children:[e.jsxs("td",{style:{padding:l[3]},children:[e.jsx("div",{style:{fontWeight:s.fontWeight.medium,color:a.textPrimary,fontSize:s.fontSize.sm},children:t.name}),e.jsxs("div",{style:{fontSize:s.fontSize.xs,color:a.textMuted},children:[t.id," â€¢ ",t.brand]})]}),e.jsx("td",{style:{padding:l[3]},children:e.jsx(N,{text:t.category,color:a.primary,size:"xs"})}),e.jsx("td",{style:{padding:l[3],textAlign:"right",fontSize:s.fontSize.sm,color:a.textSecondary},children:u(t.purchasePrice)}),e.jsx("td",{style:{padding:l[3],textAlign:"right",fontSize:s.fontSize.sm,fontWeight:s.fontWeight.medium,color:a.available},children:u(t.currentValue)})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{background:a.bgDark,fontWeight:s.fontWeight.semibold},children:[e.jsxs("td",{colSpan:2,style:{padding:l[3],fontSize:s.fontSize.sm,color:a.textPrimary},children:["Total (",p.length," items)"]}),e.jsx("td",{style:{padding:l[3],textAlign:"right",fontSize:s.fontSize.sm,color:a.textSecondary},children:u(p.reduce((t,r)=>t+(r.purchasePrice||0),0))}),e.jsx("td",{style:{padding:l[3],textAlign:"right",fontSize:s.fontSize.sm,color:a.available},children:u(p.reduce((t,r)=>t+(r.currentValue||0),0))})]})})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:l[4]},children:[e.jsxs(S,{padding:!1,children:[e.jsx(v,{title:"Value by Category"}),e.jsx("div",{style:{padding:l[4]},children:Object.entries(g.byCategory).sort((t,r)=>r[1].currentValue-t[1].currentValue).map(([t,r])=>e.jsxs("div",{style:{marginBottom:l[3]},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:l[1]},children:[e.jsx("span",{style:{fontSize:s.fontSize.sm,color:a.textSecondary},children:t}),e.jsx("span",{style:{fontSize:s.fontSize.sm,fontWeight:s.fontWeight.medium,color:a.textPrimary},children:u(r.currentValue)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l[2]},children:[e.jsx("div",{style:{flex:1,height:6,background:a.borderLight,borderRadius:z.full,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${r.currentValue/g.totalCurrent*100}%`,background:a.primary,borderRadius:z.full}})}),e.jsxs("span",{style:{fontSize:s.fontSize.xs,color:a.textMuted,minWidth:35},children:[r.count," items"]})]})]},t))})]}),e.jsxs(S,{padding:!1,children:[e.jsx(v,{title:"Highest Value Items"}),e.jsx("div",{style:{padding:l[4],maxHeight:250,overflowY:"auto"},children:g.highValueItems.map((t,r)=>e.jsxs("div",{onClick:()=>P(t.id),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:l[2],cursor:"pointer",borderRadius:z.md,marginBottom:l[1]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l[2]},children:[e.jsx("span",{style:{width:20,height:20,borderRadius:"50%",background:r<3?a.primary:a.borderLight,color:r<3?a.textPrimary:a.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontSize:s.fontSize.xs,fontWeight:s.fontWeight.medium},children:r+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:s.fontSize.sm,color:a.textPrimary},children:t.name}),e.jsx("div",{style:{fontSize:s.fontSize.xs,color:a.textMuted},children:t.id})]})]}),e.jsx("span",{style:{fontSize:s.fontSize.sm,fontWeight:s.fontWeight.semibold,color:a.available},children:u(t.currentValue)})]},t.id))})]})]})]})]})});E.propTypes={inventory:i.arrayOf(i.shape({id:i.string.isRequired,name:i.string.isRequired,brand:i.string,category:i.string,serialNumber:i.string,purchaseDate:i.string,purchasePrice:i.number,currentValue:i.number,condition:i.string,location:i.string,status:i.string})).isRequired,categories:i.arrayOf(i.string).isRequired,onViewItem:i.func.isRequired,onExport:i.func,onBack:i.func.isRequired};export{E as InsuranceReportPanel};
//# sourceMappingURL=InsuranceReportView-DRNxvyjS.js.map
