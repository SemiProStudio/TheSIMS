import{j as e,a as r,i as u,t as s,c as i,w as g,d as f,s as n,S as T,D as P,B as v,J as a}from"./index-TtmnPN12.js";import{a as x}from"./vendor-icons-B6HpBdFH.js";import{M as N,a as R}from"./ModalBase-BgtxHV_N.js";import"./vendor-react-DwPMHwnM.js";const B=x.memo(function({item:d,users:E,currentUser:y,onCheckOut:w,onClose:p}){const[o,j]=x.useState({borrowerName:y?.name||"",borrowerEmail:y?.email||"",borrowerPhone:"",project:"",projectType:"General",dueDate:"",expectedReturn:"",notes:"",condition:d?.condition||"excellent",acknowledgeCondition:!1}),[l,b]=x.useState({}),S=["General","Wedding","Corporate","Documentary","Music Video","Commercial","Film","Event","Personal","Other"],k=[{label:"End of day",days:0},{label:"Tomorrow",days:1},{label:"3 days",days:3},{label:"1 week",days:7},{label:"2 weeks",days:14}],C=t=>{const m=new Date;m.setDate(m.getDate()+t),j(h=>({...h,dueDate:m.toISOString().split("T")[0]}))},c=(t,m)=>{j(h=>({...h,[t]:m})),l[t]&&b(h=>({...h,[t]:null}))},D=()=>{const t={};return o.borrowerName.trim()||(t.borrowerName="Borrower name is required"),o.dueDate||(t.dueDate="Due date is required"),o.acknowledgeCondition||(t.acknowledgeCondition="Please acknowledge the item condition"),b(t),Object.keys(t).length===0},z=()=>{D()&&w({itemId:d.id,borrowerName:o.borrowerName.trim(),borrowerEmail:o.borrowerEmail.trim(),borrowerPhone:o.borrowerPhone.trim(),project:o.project.trim(),projectType:o.projectType,dueDate:o.dueDate,expectedReturn:o.expectedReturn||o.dueDate,notes:o.notes.trim(),conditionAtCheckout:o.condition,checkedOutDate:new Date().toISOString().split("T")[0],checkedOutTime:new Date().toLocaleTimeString()})};return d?e.jsxs(N,{onClose:p,maxWidth:550,children:[e.jsx(R,{title:"Check Out Item",onClose:p}),e.jsxs("div",{style:{padding:r[4],maxHeight:"75vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r[3],padding:r[3],background:`${g(i.primary,10)}`,borderRadius:u.lg,marginBottom:r[4]},children:[d.image?e.jsx("img",{src:d.image,alt:"",style:{width:60,height:60,objectFit:"cover",borderRadius:u.md}}):e.jsx("div",{style:{width:60,height:60,background:`${g(i.primary,20)}`,borderRadius:u.md,display:"flex",alignItems:"center",justifyContent:"center",color:i.textMuted,fontSize:s.fontSize.xs},children:"No img"}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:r[1],marginBottom:r[1]},children:[e.jsx(f,{text:d.id,color:i.primary}),e.jsx(f,{text:d.condition,color:i.available})]}),e.jsx("div",{style:{fontWeight:s.fontWeight.medium,color:i.textPrimary},children:d.name}),e.jsx("div",{style:{fontSize:s.fontSize.sm,color:i.textMuted},children:d.brand})]})]}),e.jsxs("div",{style:{marginBottom:r[4]},children:[e.jsx("h4",{style:{margin:`0 0 ${r[3]}px`,color:i.textPrimary,fontSize:s.fontSize.base},children:"Borrower Information"}),e.jsxs("div",{style:{marginBottom:r[3]},children:[e.jsxs("label",{style:{...n.label,color:!o.borrowerName||l.borrowerName?i.danger:void 0},children:["Borrower Name ",e.jsx("span",{style:{color:i.danger},children:"*"})]}),e.jsx("input",{value:o.borrowerName,onChange:t=>c("borrowerName",t.target.value),placeholder:"Who is taking this item?",style:{...n.input,borderColor:!o.borrowerName||l.borrowerName?i.danger:i.border}}),l.borrowerName&&e.jsx("span",{style:{color:i.danger,fontSize:s.fontSize.xs},children:l.borrowerName})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:r[3]},children:[e.jsxs("div",{children:[e.jsx("label",{style:n.label,children:"Email"}),e.jsx("input",{type:"email",value:o.borrowerEmail,onChange:t=>c("borrowerEmail",t.target.value),placeholder:"email@example.com",style:n.input})]}),e.jsxs("div",{children:[e.jsx("label",{style:n.label,children:"Phone"}),e.jsx("input",{type:"tel",value:o.borrowerPhone,onChange:t=>c("borrowerPhone",t.target.value),placeholder:"555-123-4567",style:n.input})]})]})]}),e.jsxs("div",{style:{marginBottom:r[4]},children:[e.jsx("h4",{style:{margin:`0 0 ${r[3]}px`,color:i.textPrimary,fontSize:s.fontSize.base},children:"Project Details"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:r[3],marginBottom:r[3]},children:[e.jsxs("div",{children:[e.jsx("label",{style:n.label,children:"Project Name"}),e.jsx("input",{value:o.project,onChange:t=>c("project",t.target.value),placeholder:"e.g., Smith Wedding, TechCorp Video",style:n.input})]}),e.jsxs("div",{children:[e.jsx("label",{style:n.label,children:"Type"}),e.jsx(T,{value:o.projectType,onChange:t=>c("projectType",t.target.value),options:S.map(t=>({value:t,label:t})),"aria-label":"Project type"})]})]})]}),e.jsxs("div",{style:{marginBottom:r[4]},children:[e.jsx("h4",{style:{margin:`0 0 ${r[3]}px`,color:i.textPrimary,fontSize:s.fontSize.base},children:"Return Schedule"}),e.jsxs("div",{style:{marginBottom:r[3]},children:[e.jsx("label",{style:n.label,children:"Quick Select"}),e.jsx("div",{style:{display:"flex",gap:r[2],flexWrap:"wrap"},children:k.map(t=>e.jsx("button",{onClick:()=>C(t.days),style:{...n.btnSec,padding:`${r[1]}px ${r[3]}px`,fontSize:s.fontSize.sm},children:t.label},t.days))})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{...n.label,color:!o.dueDate||l.dueDate?i.danger:void 0},children:["Due Date ",e.jsx("span",{style:{color:i.danger},children:"*"})]}),e.jsx(P,{value:o.dueDate,onChange:t=>c("dueDate",t.target.value),min:new Date().toISOString().split("T")[0],error:!o.dueDate||l.dueDate,placeholder:"Select due date","aria-label":"Due date"}),l.dueDate&&e.jsx("span",{style:{color:i.danger,fontSize:s.fontSize.xs},children:l.dueDate})]})]}),e.jsxs("div",{style:{marginBottom:r[4]},children:[e.jsx("label",{style:n.label,children:"Checkout Notes"}),e.jsx("textarea",{value:o.notes,onChange:t=>c("notes",t.target.value),placeholder:"Any special instructions or notes for this checkout...",rows:3,style:{...n.input,resize:"vertical"}})]}),e.jsxs("div",{style:{padding:r[3],background:`${g(i.accent1,15)}`,borderRadius:u.md,marginBottom:r[4]},children:[e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:r[2],cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:o.acknowledgeCondition,onChange:t=>c("acknowledgeCondition",t.target.checked),style:{marginTop:4,accentColor:i.primary}}),e.jsxs("div",{children:[e.jsxs("span",{style:{color:i.textPrimary,fontSize:s.fontSize.sm},children:["I confirm the item is in ",e.jsx("strong",{children:d.condition})," condition at checkout"]}),e.jsx("p",{style:{color:i.textMuted,fontSize:s.fontSize.xs,margin:`${r[1]}px 0 0`},children:"You'll be asked to verify the condition again at check-in"})]})]}),l.acknowledgeCondition&&e.jsx("span",{style:{color:i.danger,fontSize:s.fontSize.xs,display:"block",marginTop:r[1]},children:l.acknowledgeCondition})]}),e.jsxs("div",{style:{display:"flex",gap:r[3],justifyContent:"flex-end"},children:[e.jsx(v,{variant:"secondary",onClick:p,children:"Cancel"}),e.jsx(v,{onClick:z,children:"Confirm Check Out"})]})]})]}):null});B.propTypes={item:a.shape({id:a.string.isRequired,name:a.string.isRequired,brand:a.string,condition:a.string,image:a.string,status:a.string}).isRequired,users:a.arrayOf(a.shape({id:a.string.isRequired,name:a.string.isRequired,email:a.string})),currentUser:a.shape({id:a.string,name:a.string,email:a.string}),onCheckOut:a.func.isRequired,onClose:a.func.isRequired};export{B as CheckOutModal};
//# sourceMappingURL=CheckOutModal-YRNUavqZ.js.map
