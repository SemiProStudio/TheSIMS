{"version":3,"file":"AddUserModal-BBUbTwHT.js","sources":["../../modals/AddUserModal.jsx"],"sourcesContent":["// ============================================================================\n// Add User Modal\n// Modal for adding new users to the system\n// ============================================================================\n\nimport React, { memo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Plus } from 'lucide-react';\nimport { colors, styles, spacing, typography } from '../theme.js';\nimport { Button } from '../components/ui.jsx';\nimport { Select } from '../components/Select.jsx';\nimport { Modal, ModalHeader } from './ModalBase.jsx';\n\nexport const AddUserModal = memo(function AddUserModal({ onSave, onClose, existingEmails = [] }) {\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'user',\n  });\n  const [errors, setErrors] = useState({});\n\n  const validate = () => {\n    const newErrors = {};\n    if (!form.name.trim()) newErrors.name = 'Name is required';\n    if (!form.email.trim()) newErrors.email = 'Email is required';\n    else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email)) newErrors.email = 'Invalid email format';\n    else if (existingEmails.includes(form.email.toLowerCase())) newErrors.email = 'Email already exists';\n    if (!form.password.trim()) newErrors.password = 'Password is required';\n    else if (form.password.length < 4) newErrors.password = 'Password must be at least 4 characters';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSave = () => {\n    if (validate()) {\n      onSave({\n        id: `u${Date.now()}`,\n        name: form.name.trim(),\n        email: form.email.trim().toLowerCase(),\n        password: form.password,\n        role: form.role,\n        roleId: form.role === 'admin' ? 'role_admin' : 'role_user',\n        avatar: form.name.trim().charAt(0).toUpperCase(),\n      });\n    }\n  };\n\n  return (\n    <Modal onClose={onClose} maxWidth={450}>\n      <ModalHeader title=\"Add User\" onClose={onClose} />\n      <div style={{ padding: spacing[4] }}>\n        <div style={{ marginBottom: spacing[3] }}>\n          <label style={{ ...styles.label, color: !form.name || errors.name ? colors.danger : undefined }}>\n            Name <span style={{ color: colors.danger }}>*</span>\n          </label>\n          <input\n            value={form.name}\n            onChange={e => setForm(prev => ({ ...prev, name: e.target.value }))}\n            placeholder=\"Full name\"\n            style={{ ...styles.input, borderColor: !form.name || errors.name ? colors.danger : colors.border }}\n          />\n          {errors.name && <span style={{ color: colors.danger, fontSize: typography.fontSize.xs }}>{errors.name}</span>}\n        </div>\n        \n        <div style={{ marginBottom: spacing[3] }}>\n          <label style={{ ...styles.label, color: !form.email || errors.email ? colors.danger : undefined }}>\n            Email <span style={{ color: colors.danger }}>*</span>\n          </label>\n          <input\n            type=\"email\"\n            value={form.email}\n            onChange={e => setForm(prev => ({ ...prev, email: e.target.value }))}\n            placeholder=\"user@example.com\"\n            style={{ ...styles.input, borderColor: !form.email || errors.email ? colors.danger : colors.border }}\n          />\n          {errors.email && <span style={{ color: colors.danger, fontSize: typography.fontSize.xs }}>{errors.email}</span>}\n        </div>\n        \n        <div style={{ marginBottom: spacing[3] }}>\n          <label style={{ ...styles.label, color: !form.password || errors.password ? colors.danger : undefined }}>\n            Password <span style={{ color: colors.danger }}>*</span>\n          </label>\n          <input\n            type=\"password\"\n            value={form.password}\n            onChange={e => setForm(prev => ({ ...prev, password: e.target.value }))}\n            placeholder=\"Minimum 4 characters\"\n            style={{ ...styles.input, borderColor: !form.password || errors.password ? colors.danger : colors.border }}\n          />\n          {errors.password && <span style={{ color: colors.danger, fontSize: typography.fontSize.xs }}>{errors.password}</span>}\n        </div>\n        \n        <div style={{ marginBottom: spacing[4] }}>\n          <label style={styles.label}>Role</label>\n          <Select\n            value={form.role}\n            onChange={e => setForm(prev => ({ ...prev, role: e.target.value }))}\n            options={[\n              { value: 'user', label: 'User' },\n              { value: 'admin', label: 'Admin' },\n            ]}\n            aria-label=\"Role\"\n          />\n        </div>\n        \n        <div style={{ display: 'flex', gap: spacing[3], justifyContent: 'flex-end' }}>\n          <Button variant=\"secondary\" onClick={onClose}>Cancel</Button>\n          <Button onClick={handleSave} icon={Plus}>Add User</Button>\n        </div>\n      </div>\n    </Modal>\n  );\n});\n\n// ============================================================================\n// PropTypes\n// ============================================================================\nAddUserModal.propTypes = {\n  /** Callback when user is saved with user data */\n  onSave: PropTypes.func.isRequired,\n  /** Callback to close modal */\n  onClose: PropTypes.func.isRequired,\n  /** List of existing emails for duplicate validation */\n  existingEmails: PropTypes.arrayOf(PropTypes.string),\n};\n"],"names":["AddUserModal","memo","onSave","onClose","existingEmails","form","setForm","useState","errors","setErrors","validate","newErrors","handleSave","jsxs","Modal","jsx","ModalHeader","spacing","styles","colors","e","prev","typography","Select","Button","Plus","PropTypes"],"mappings":"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"}