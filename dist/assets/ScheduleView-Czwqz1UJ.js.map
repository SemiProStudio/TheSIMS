{"version":3,"file":"ScheduleView-Czwqz1UJ.js","sources":["../../views/ScheduleView.jsx"],"sourcesContent":["// ============================================================================\n// Schedule View Component\n// ============================================================================\n\nimport React, { memo, useMemo, useCallback } from 'react';\nimport { ArrowLeft, ArrowRight, Calendar, List, Clock, MapPin, Plus, Package } from 'lucide-react';\nimport { SCHEDULE_MODES, SCHEDULE_PERIODS } from '../constants.js';\nimport { colors, styles, spacing, borderRadius, typography, withOpacity} from '../theme.js';\nimport { formatDate } from '../utils.js';\nimport { Badge, Card, Button } from '../components/ui.jsx';\nimport { DatePicker } from '../components/DatePicker.jsx';\n\nfunction ScheduleView({\n  inventory,\n  scheduleView,\n  setScheduleView,\n  scheduleDate,\n  setScheduleDate,\n  scheduleMode,\n  setScheduleMode,\n  onViewItem,\n  onViewReservation,\n  onAddReservation\n}) {\n  // Get all reservations with item info\n  const allReservations = useMemo(() => {\n    return (inventory || [])\n      .flatMap(i => (i.reservations || []).map(r => ({ ...r, item: i })))\n      .sort((a, b) => new Date(a.start) - new Date(b.start));\n  }, [inventory]);\n\n  // Group reservations by project+dates (multi-item reservations)\n  const groupedReservations = useMemo(() => {\n    const groups = {};\n    allReservations.forEach(r => {\n      // Create a key based on project name, start date, and end date\n      const key = `${r.project || 'unnamed'}_${r.start}_${r.end}`;\n      if (!groups[key]) {\n        groups[key] = {\n          ...r,\n          items: [r.item],\n          itemCount: 1\n        };\n      } else {\n        groups[key].items.push(r.item);\n        groups[key].itemCount++;\n      }\n    });\n    return Object.values(groups).sort((a, b) => new Date(a.start) - new Date(b.start));\n  }, [allReservations]);\n\n  // Get dates for current view\n  const scheduleDates = useMemo(() => {\n    const base = new Date(scheduleDate);\n    if (scheduleView === SCHEDULE_PERIODS.DAY) return [base];\n    if (scheduleView === SCHEDULE_PERIODS.WEEK) {\n      return [...Array(7)].map((_, i) => {\n        const d = new Date(base);\n        d.setDate(base.getDate() + i);\n        return d;\n      });\n    }\n    // Month - always show 6 complete weeks (42 days) for consistent height\n    const firstOfMonth = new Date(base.getFullYear(), base.getMonth(), 1);\n    \n    // Start from the Sunday of the week containing the 1st\n    const start = new Date(firstOfMonth);\n    start.setDate(start.getDate() - start.getDay());\n    \n    // Always generate exactly 42 days (6 weeks)\n    const days = [];\n    for (let i = 0; i < 42; i++) {\n      const d = new Date(start);\n      d.setDate(start.getDate() + i);\n      days.push(d);\n    }\n    return days;\n  }, [scheduleDate, scheduleView]);\n\n  // Helper to format date consistently (avoiding timezone issues)\n  const formatDateStr = useCallback((date) => {\n    return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n  }, []);\n\n  // Filter grouped reservations for current date range\n  const filteredReservations = useMemo(() => {\n    const startRange = formatDateStr(scheduleDates[0]);\n    const endRange = formatDateStr(scheduleDates[scheduleDates.length - 1]);\n    return groupedReservations.filter(r => r.start <= endRange && r.end >= startRange);\n  }, [groupedReservations, scheduleDates, formatDateStr]);\n\n  const navigate = useCallback((dir) => {\n    const d = new Date(scheduleDate);\n    if (scheduleView === SCHEDULE_PERIODS.DAY) d.setDate(d.getDate() + dir);\n    else if (scheduleView === SCHEDULE_PERIODS.WEEK) d.setDate(d.getDate() + dir * 7);\n    else d.setMonth(d.getMonth() + dir);\n    setScheduleDate(formatDateStr(d));\n  }, [scheduleDate, scheduleView, setScheduleDate, formatDateStr]);\n\n  const todayStr = formatDateStr(new Date());\n  const isMonth = scheduleView === SCHEDULE_PERIODS.MONTH;\n  const isDay = scheduleView === SCHEDULE_PERIODS.DAY;\n\n  // Go back to month view for the current date\n  const goToMonthView = useCallback(() => {\n    setScheduleView(SCHEDULE_PERIODS.MONTH);\n  }, [setScheduleView]);\n\n  return (\n    <>\n      {/* Header */}\n      <div className=\"page-header\">\n        <div style={{ display: 'flex', alignItems: 'center', gap: spacing[3] }}>\n          {/* Back to Month button - show when in Day view with Calendar mode */}\n          {isDay && scheduleMode === SCHEDULE_MODES.CALENDAR && (\n            <Button variant=\"secondary\" onClick={goToMonthView} icon={ArrowLeft}>\n              Month\n            </Button>\n          )}\n          <h2 className=\"page-title\">Schedule</h2>\n        </div>\n\n        <div style={{ display: 'flex', gap: spacing[3], alignItems: 'center', flexWrap: 'wrap' }}>\n          {/* New Reservation Button */}\n          {onAddReservation && (\n            <Button onClick={onAddReservation} icon={Plus} style={{ marginRight: spacing[2] }}>New</Button>\n          )}\n\n          {/* List/Calendar Toggle */}\n          <div style={{ display: 'flex', background: `${withOpacity(colors.primary, 15)}`, borderRadius: borderRadius.lg }}>\n            <button \n              onClick={() => setScheduleMode(SCHEDULE_MODES.LIST)} \n              title=\"List View\" \n              style={{ \n                ...styles.btnSec, \n                border: 'none', \n                background: scheduleMode === SCHEDULE_MODES.LIST ? `${withOpacity(colors.primary, 30)}` : 'transparent', \n                color: scheduleMode === SCHEDULE_MODES.LIST ? colors.primary : colors.textSecondary,\n                padding: '12px 14px'\n              }}\n            >\n              <List size={16} />\n            </button>\n            <button \n              onClick={() => setScheduleMode(SCHEDULE_MODES.CALENDAR)} \n              title=\"Calendar View\" \n              style={{ \n                ...styles.btnSec, \n                border: 'none', \n                background: scheduleMode === SCHEDULE_MODES.CALENDAR ? `${withOpacity(colors.primary, 30)}` : 'transparent', \n                color: scheduleMode === SCHEDULE_MODES.CALENDAR ? colors.primary : colors.textSecondary,\n                padding: '12px 14px'\n              }}\n            >\n              <Calendar size={16} />\n            </button>\n          </div>\n\n          {/* Day/Week/Month Toggle */}\n          <div style={{ display: 'flex', background: `${withOpacity(colors.primary, 15)}`, borderRadius: borderRadius.lg }}>\n            {Object.values(SCHEDULE_PERIODS).map(v => (\n              <button \n                key={v} \n                onClick={() => setScheduleView(v)} \n                style={{ \n                  ...styles.btnSec, \n                  border: 'none', \n                  background: scheduleView === v ? `${withOpacity(colors.primary, 30)}` : 'transparent', \n                  color: scheduleView === v ? colors.primary : colors.textSecondary,\n                  fontWeight: scheduleView === v ? typography.fontWeight.medium : typography.fontWeight.normal,\n                  textTransform: 'capitalize', \n                  fontSize: typography.fontSize.sm, \n                  padding: '12px 14px'\n                }}\n              >\n                {v}\n              </button>\n            ))}\n          </div>\n\n          {/* Navigation */}\n          <div style={{ display: 'flex', gap: spacing[1], alignItems: 'center' }}>\n            <Button variant=\"secondary\" onClick={() => navigate(-1)} icon={ArrowLeft} style={{ padding: '12px 14px' }} />\n            <DatePicker \n              value={scheduleDate} \n              onChange={e => setScheduleDate(e.target.value)} \n              style={{ width: '160px' }}\n              showTodayButton={false}\n              clearable={false}\n              aria-label=\"Schedule date\"\n            />\n            <Button variant=\"secondary\" onClick={() => navigate(1)} icon={ArrowRight} style={{ padding: '12px 14px' }} />\n          </div>\n        </div>\n      </div>\n\n      {/* List View */}\n      {scheduleMode === SCHEDULE_MODES.LIST && (\n        <Card padding={false}>\n          <div style={{ padding: spacing[4], borderBottom: `1px solid ${colors.borderLight}`, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <strong style={{ color: colors.textPrimary }}>Reservations</strong>\n            <span style={{ fontSize: typography.fontSize.sm, color: colors.textMuted }}>{filteredReservations.length} in this period</span>\n          </div>\n          <div style={{ maxHeight: 'calc(100vh - 280px)', overflowY: 'auto' }}>\n            {filteredReservations.length === 0 ? (\n              <div style={{ padding: spacing[10], textAlign: 'center', color: colors.textMuted }}>No reservations in this period</div>\n            ) : filteredReservations.map((r, idx) => (\n              <div key={`${r.project}-${r.start}-${idx}`} onClick={() => onViewReservation(r, r.items[0])} style={{ display: 'flex', alignItems: 'center', gap: spacing[4], padding: `${spacing[4]}px ${spacing[4]}px`, borderBottom: `1px solid ${colors.borderLight}`, cursor: 'pointer' }}>\n                {/* Show stacked images for multi-item reservations */}\n                <div style={{ position: 'relative', width: 50, height: 50, flexShrink: 0 }}>\n                  {r.items.slice(0, Math.min(3, r.itemCount)).map((itm, i) => (\n                    <div key={itm.id} style={{ \n                      position: i === 0 ? 'relative' : 'absolute',\n                      top: i * 4,\n                      left: i * 4,\n                      zIndex: 3 - i,\n                    }}>\n                      {itm.image ? (\n                        <img src={itm.image} alt=\"\" style={{ width: 46 - i * 4, height: 46 - i * 4, borderRadius: borderRadius.md, objectFit: 'cover', border: `2px solid ${colors.bgMedium}` }} />\n                      ) : (\n                        <div style={{ width: 46 - i * 4, height: 46 - i * 4, borderRadius: borderRadius.md, background: withOpacity(colors.primary, 15), display: 'flex', alignItems: 'center', justifyContent: 'center', color: colors.textMuted, border: `2px solid ${colors.bgMedium}` }}>\n                          <Package size={14} />\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n                <div style={{ flex: 1, minWidth: 0 }}>\n                  <div style={{ display: 'flex', gap: spacing[2], marginBottom: spacing[1], flexWrap: 'wrap' }}>\n                    {r.itemCount > 1 ? (\n                      <Badge text={`${r.itemCount} items`} color={colors.primary} />\n                    ) : (\n                      <Badge text={r.items[0]?.id || 'N/A'} color={colors.primary} />\n                    )}\n                    <Badge text={r.projectType || 'Project'} color={colors.accent2} />\n                  </div>\n                  <div style={{ fontWeight: typography.fontWeight.medium, color: colors.textPrimary, marginBottom: spacing[1] }}>{r.project}</div>\n                  <div style={{ fontSize: typography.fontSize.sm, color: colors.textMuted }}>\n                    {r.itemCount > 1 \n                      ? `${r.items[0]?.name || 'Unknown'}${r.itemCount > 1 ? ` + ${r.itemCount - 1} more` : ''}`\n                      : `${r.items[0]?.name || 'Unknown'} â€¢ ${r.user}`\n                    }\n                  </div>\n                </div>\n                <div style={{ textAlign: 'right' }}>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: spacing[1], fontSize: typography.fontSize.sm, color: colors.primary, marginBottom: spacing[1] }}><Clock size={12} />{formatDate(r.start)} - {formatDate(r.end)}</div>\n                  {r.location && <div style={{ display: 'flex', alignItems: 'center', gap: spacing[1], fontSize: typography.fontSize.xs, color: colors.textMuted }}><MapPin size={10} />{r.location.substring(0, 25)}{r.location.length > 25 ? '...' : ''}</div>}\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n      )}\n\n      {/* Calendar View */}\n      {scheduleMode === SCHEDULE_MODES.CALENDAR && (() => {\n        // Get current month for comparison (to dim days outside current month)\n        const currentMonth = new Date(scheduleDate).getMonth();\n        \n        return (\n        <div style={{ \n          display: 'grid', \n          gridTemplateColumns: isMonth ? 'repeat(7, minmax(0, 1fr))' : '1fr', \n          gridAutoRows: isMonth ? '110px' : 'auto',\n          gap: isMonth ? spacing[1] : spacing[3],\n        }}>\n          {scheduleDates.map((dt, idx) => {\n            const ds = formatDateStr(dt);\n            const isToday = ds === todayStr;\n            const isOutsideMonth = isMonth && dt.getMonth() !== currentMonth;\n            // Use grouped reservations for consistency with list view\n            const events = groupedReservations.filter(r => r.start <= ds && r.end >= ds);\n\n            // Click handler to navigate to day view\n            const handleDateClick = () => {\n              if (isMonth) {\n                setScheduleDate(ds);\n                setScheduleView(SCHEDULE_PERIODS.DAY);\n              }\n            };\n\n            return (\n              <div key={idx} style={{ height: '100%' }}>\n              <Card padding={false} style={{ \n                height: '100%',\n                minHeight: isDay ? 300 : 'auto',\n                borderColor: isToday ? colors.primary : undefined,\n                overflow: 'hidden',\n                display: 'flex',\n                opacity: isOutsideMonth ? 0.4 : 1,\n                flexDirection: 'column',\n              }}>\n                <div \n                  onClick={handleDateClick}\n                  style={{ \n                    padding: isMonth ? `${spacing[1]}px ${spacing[2]}px` : `${spacing[2]}px ${spacing[3]}px`, \n                    borderBottom: `1px solid ${colors.borderLight}`, \n                    display: 'flex', \n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    background: isToday ? `${withOpacity(colors.primary, 15)}` : undefined,\n                    cursor: isMonth ? 'pointer' : 'default',\n                    transition: 'background 150ms ease',\n                  }}\n                  onMouseEnter={isMonth ? (e) => { if (!isToday) e.currentTarget.style.background = `${withOpacity(colors.primary, 10)}`; } : undefined}\n                  onMouseLeave={isMonth ? (e) => { if (!isToday) e.currentTarget.style.background = 'transparent'; } : undefined}\n                >\n                  <div style={{ display: 'flex', alignItems: 'center', gap: spacing[2] }}>\n                    <span style={{ fontSize: isMonth ? typography.fontSize.xs : typography.fontSize.base, fontWeight: typography.fontWeight.semibold, color: isToday ? colors.primary : colors.textPrimary }}>{dt.toLocaleDateString('en-US', { weekday: isMonth ? 'short' : 'long' })}</span>\n                    <span style={{ fontSize: isMonth ? typography.fontSize.sm : typography.fontSize.base, color: isToday ? colors.primary : colors.textMuted }}>{dt.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</span>\n                  </div>\n                  {/* Only show badge in non-month views */}\n                  {!isMonth && events.length > 0 && (\n                    <Badge text={`${events.length} reservation${events.length > 1 ? 's' : ''}`} color={colors.primary} size=\"sm\" />\n                  )}\n                </div>\n                <div style={{ \n                  padding: isMonth ? spacing[1] : spacing[2], \n                  overflowY: 'auto', \n                  overflowX: 'hidden',\n                  maxHeight: isDay ? 260 : isMonth ? 60 : 'none',\n                  flex: isMonth ? 1 : 'none',\n                  display: isMonth ? 'block' : 'flex',\n                  flexWrap: 'wrap',\n                  gap: isMonth ? 0 : spacing[2],\n                }}>\n                  {events.map((e, i) => (\n                    <div \n                      key={i} \n                      onClick={() => onViewReservation(e, e.items[0])} \n                      title={`${e.itemCount > 1 ? `${e.itemCount} items` : e.items[0]?.name}${e.project ? ` - ${e.project}` : ''}`}\n                      style={{ \n                        background: `${withOpacity(colors.primary, 20)}`, \n                        borderLeft: `3px solid ${colors.primary}`, \n                        borderRadius: borderRadius.sm, \n                        padding: isMonth ? spacing[1] : spacing[2], \n                        marginBottom: spacing[1], \n                        cursor: 'pointer',\n                        overflow: 'hidden',\n                      }}\n                    >\n                      <div style={{ \n                        fontSize: isMonth ? typography.fontSize.xs : typography.fontSize.sm, \n                        fontWeight: typography.fontWeight.medium, \n                        color: colors.textPrimary, \n                        overflow: 'hidden', \n                        textOverflow: 'ellipsis', \n                        whiteSpace: 'nowrap',\n                      }}>\n                        {e.itemCount > 1 ? `${e.itemCount} items` : e.items[0]?.name}\n                      </div>\n                      {!isMonth && (\n                        <div style={{ \n                          fontSize: typography.fontSize.xs, \n                          color: colors.primary,\n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                        }}>\n                          {e.project}\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </Card>\n              </div>\n            );\n          })}\n        </div>\n        );\n      })()}\n    </>\n  );\n}\n\nexport default memo(ScheduleView);\n"],"names":["ScheduleView","inventory","scheduleView","setScheduleView","scheduleDate","setScheduleDate","scheduleMode","setScheduleMode","onViewItem","onViewReservation","onAddReservation","allReservations","useMemo","i","r","a","b","groupedReservations","groups","key","scheduleDates","base","SCHEDULE_PERIODS","_","d","firstOfMonth","start","days","formatDateStr","useCallback","date","filteredReservations","startRange","endRange","navigate","dir","todayStr","isMonth","isDay","goToMonthView","jsxs","Fragment","spacing","SCHEDULE_MODES","jsx","Button","ArrowLeft","Plus","withOpacity","colors","borderRadius","styles","List","Calendar","v","typography","DatePicker","e","ArrowRight","Card","idx","itm","Package","Badge","Clock","formatDate","MapPin","currentMonth","dt","ds","isToday","isOutsideMonth","events","handleDateClick","ScheduleView_default","memo"],"mappings":"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"}