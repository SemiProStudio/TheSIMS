{"version":3,"file":"ModalBase-BgtxHV_N.js","sources":["../../modals/ModalBase.jsx"],"sourcesContent":["// ============================================================================\n// Base Modal Components\n// Shared modal wrapper and header components with accessibility\n// ============================================================================\n\nimport React, { memo, useRef, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { X } from 'lucide-react';\nimport { colors, styles, spacing, typography } from '../theme.js';\n\n// ============================================================================\n// Base Modal Component with Accessibility\n// ============================================================================\nexport const Modal = memo(function Modal({ onClose, maxWidth = 500, title, children }) {\n  const modalRef = useRef(null);\n  const previousActiveElement = useRef(null);\n  \n  // Store the previously focused element and focus the modal\n  useEffect(() => {\n    previousActiveElement.current = document.activeElement;\n    \n    // Focus the modal container\n    if (modalRef.current) {\n      modalRef.current.focus();\n    }\n    \n    // Prevent body scroll when modal is open\n    document.body.style.overflow = 'hidden';\n    \n    return () => {\n      document.body.style.overflow = '';\n      // Return focus to previous element\n      if (previousActiveElement.current && previousActiveElement.current.focus) {\n        previousActiveElement.current.focus();\n      }\n    };\n  }, []);\n  \n  // Handle keyboard events\n  const handleKeyDown = useCallback((e) => {\n    if (e.key === 'Escape') {\n      e.preventDefault();\n      onClose();\n    }\n    \n    // Trap focus within modal\n    if (e.key === 'Tab' && modalRef.current) {\n      const focusableElements = modalRef.current.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n      const firstElement = focusableElements[0];\n      const lastElement = focusableElements[focusableElements.length - 1];\n      \n      if (e.shiftKey && document.activeElement === firstElement) {\n        e.preventDefault();\n        lastElement?.focus();\n      } else if (!e.shiftKey && document.activeElement === lastElement) {\n        e.preventDefault();\n        firstElement?.focus();\n      }\n    }\n  }, [onClose]);\n  \n  return (\n    <div \n      className=\"modal-backdrop\" \n      style={styles.modal} \n      onClick={onClose}\n      role=\"presentation\"\n    >\n      <div \n        ref={modalRef}\n        onClick={e => e.stopPropagation()} \n        onKeyDown={handleKeyDown}\n        style={{ ...styles.modalBox, maxWidth }}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby={title ? \"modal-title\" : undefined}\n        tabIndex={-1}\n      >\n        {children}\n      </div>\n    </div>\n  );\n});\n\n// ============================================================================\n// Modal Header\n// ============================================================================\nexport const ModalHeader = memo(function ModalHeader({ title, onClose }) {\n  return (\n    <div style={{ padding: spacing[4], borderBottom: `1px solid ${colors.borderLight}`, display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n      <h3 id=\"modal-title\" style={{ margin: 0, fontSize: typography.fontSize.lg, color: colors.textPrimary }}>{title}</h3>\n      <button \n        onClick={onClose} \n        style={{ background: 'none', border: 'none', color: colors.textMuted, cursor: 'pointer', padding: spacing[1] }}\n        aria-label=\"Close dialog\"\n        type=\"button\"\n      >\n        <X size={20} aria-hidden=\"true\" />\n      </button>\n    </div>\n  );\n});\n\n// ============================================================================\n// Modal Footer - Common footer pattern\n// ============================================================================\nexport const ModalFooter = memo(function ModalFooter({ children }) {\n  return (\n    <div style={{ \n      padding: spacing[4], \n      borderTop: `1px solid ${colors.borderLight}`, \n      display: 'flex', \n      gap: spacing[3], \n      justifyContent: 'flex-end' \n    }}>\n      {children}\n    </div>\n  );\n});\n\n// ============================================================================\n// Modal Body - Scrollable content area\n// ============================================================================\nexport const ModalBody = memo(function ModalBody({ children, noPadding = false }) {\n  return (\n    <div style={{ \n      padding: noPadding ? 0 : spacing[4],\n      maxHeight: '70vh',\n      overflowY: 'auto'\n    }}>\n      {children}\n    </div>\n  );\n});\n\n// ============================================================================\n// PropTypes\n// ============================================================================\nModal.propTypes = {\n  /** Function called when modal should close */\n  onClose: PropTypes.func.isRequired,\n  /** Maximum width of the modal in pixels */\n  maxWidth: PropTypes.number,\n  /** Optional title for aria-labelledby */\n  title: PropTypes.string,\n  /** Modal content */\n  children: PropTypes.node.isRequired,\n};\n\nModalHeader.propTypes = {\n  /** Title displayed in the header */\n  title: PropTypes.string.isRequired,\n  /** Function called when close button is clicked */\n  onClose: PropTypes.func.isRequired,\n};\n\nModalFooter.propTypes = {\n  /** Footer content (typically buttons) */\n  children: PropTypes.node.isRequired,\n};\n\nModalBody.propTypes = {\n  /** Body content */\n  children: PropTypes.node.isRequired,\n  /** If true, removes padding from body */\n  noPadding: PropTypes.bool,\n};\n"],"names":["Modal","memo","onClose","maxWidth","title","children","modalRef","useRef","previousActiveElement","useEffect","handleKeyDown","useCallback","e","focusableElements","firstElement","lastElement","jsx","styles","ModalHeader","spacing","colors","typography","X","ModalFooter","ModalBody","noPadding","PropTypes"],"mappings":"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"}